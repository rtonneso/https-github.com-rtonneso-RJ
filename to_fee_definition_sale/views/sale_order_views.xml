<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<data>
		<record model="ir.ui.view" id="view_order_form">
			<field name="name">sale.order.form</field>
			<field name="model">sale.order</field>
			<field name="inherit_id" ref="sale.view_order_form" />
			<field name="arch" type="xml">
				<xpath expr="//button[@name='action_quotation_send']"
					position="before">
					<button name="action_compute_fees" string="Compute Supplementary Fees"
						type="object" class="btn-primary"
						attrs="{'invisible':['|',('should_create_fees','=',False),('state','not in',('draft','sent'))]}">
						<field name="should_create_fees" invisible="1" />
					</button>
				</xpath>
				<xpath expr="//page[last()]" position="after">
					<page id="order_line_fee_ids"
						string="Order Lines Fees Mapping" groups="base.group_no_one">
						<field name="order_line_fee_ids" readonly="1">
							<tree name="order_line_fee_ids">
								<field name="fee_line_id" />
								<field name="line_id" />
								<field name="fee_definition_id" />
								<field name="quantity" />
								<field name="lst_price" />
							</tree>
						</field>
					</page>
				</xpath>
				<xpath
					expr="//field[@name='order_line']/form/div[@groups='base.group_no_one']"
					fee_idsn="inside">
					<label for="fee_ids" />
					<field name="fee_ids">
						<tree name="fee_ids">
							<field name="fee_line_id" />
							<field name="line_id" />
							<field name="fee_definition_id" />
							<field name="quantity" />
							<field name="lst_price" />
						</tree>
					</field>
					<label for="fee_for_line_ids" />
					<field name="fee_for_line_ids">
						<tree name="fee_for_line_ids">
							<field name="fee_line_id" />
							<field name="line_id" />
							<field name="fee_definition_id" />
							<field name="quantity" />
							<field name="lst_price" />
						</tree>
					</field>
				</xpath>
			</field>
		</record>
	</data>
</odoo>